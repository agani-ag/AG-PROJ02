<nav class="mobile-bottom-nav d-md-none">
    <div class="nav-scroll">

        <!-- Home -->
        <a href="{% url 'v1home' %}?u={{ request.GET.u }}" class="nav-item" data-page="home">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </a>

        <!-- Invoices -->
        <a href="{% url 'v1invoices' %}?u={{ request.GET.u }}" class="nav-item" data-page="invoices">
            <i class="fas fa-file-invoice"></i>
            <span>Invoices</span>
        </a>
        
        <!-- Books -->
        <a href="{% url 'v1books' %}?u={{ request.GET.u }}" class="nav-item" data-page="books">
            <i class="fas fa-book-open"></i>
            <span>Books</span>
        </a>

        <!-- Customers -->
        <a href="{% url 'v1customers' %}?u={{ request.GET.u }}" class="nav-item" data-page="customers">
            <i class="fas fa-users"></i>
            <span>Customers</span>
        </a>

        <!-- Products -->
        <a href="{% url 'v1products' %}?u={{ request.GET.u }}" class="nav-item" data-page="products">
            <i class="fas fa-box"></i>
            <span>Products</span>
        </a>
        
        <!-- Expenses Tracker -->
        <a href="{% url 'v1expensestracker' %}?u={{ request.GET.u }}" class="nav-item" data-page="expensestracker">
            <i class="fas fa-wallet"></i>
            <span>Expenses</span>
        </a>

        <!-- Purchase Logs -->
        <a href="{% url 'v1purchaselogs' %}?u={{ request.GET.u }}" class="nav-item" data-page="purchaselogs">
            <i class="fas fa-shopping-cart"></i>
            <span>Purchase Logs</span>
        </a>
        
        <!-- Profile -->
        <a href="{% url 'v1customerprofile' %}?u={{ request.GET.u }}" class="nav-item" data-page="profile">
            <i class="fas fa-user-circle"></i>
            <span>Profile</span>
        </a>
    </div>
</nav>

<script>
    // Add All With users_filter={{ request.GET.users_filter }}&u={{ request.GET.u }}
    document.querySelectorAll('.nav-item').forEach(item => {
        const url = new URL(item.href);
        url.searchParams.set('users_filter', '{{ request.GET.users_filter }}');
        item.href = url.toString();
    });
    // Highlight active nav item based on current URL
    document.addEventListener('DOMContentLoaded', function() {
        const currentPath = window.location.pathname;
        const navItems = document.querySelectorAll('.nav-item');
        let activeItem = null;
        
        navItems.forEach(item => {
            const page = item.dataset.page;
            
            // Remove active class first
            item.classList.remove('active');
            
            // Check for exact page matches (employee URLs)
            if (page === 'home' && currentPath.endsWith('/home')) {
                item.classList.add('active');
                activeItem = item;
            } else if (page === 'invoices' && currentPath.endsWith('/invoices')) {
                item.classList.add('active');
                activeItem = item;
            } else if (page === 'books' && currentPath.endsWith('/books')) {
                item.classList.add('active');
                activeItem = item;
            } else if (page === 'customers' && currentPath.endsWith('/customers')) {
                item.classList.add('active');
                activeItem = item;
            } else if (page === 'products' && currentPath.endsWith('/products')) {
                item.classList.add('active');
                activeItem = item;
            } else if (page === 'expensestracker' && currentPath.endsWith('/expensestracker')) {
                item.classList.add('active');
                activeItem = item;
            } else if (page === 'purchaselogs' && currentPath.endsWith('/purchaselogs')) {
                item.classList.add('active');
                activeItem = item;
            } else if (page === 'profile' && currentPath.includes('/customer/profile')) {
                item.classList.add('active');
                activeItem = item;
            }
        });
        
        // Scroll active item into view
        if (activeItem) {
            setTimeout(() => {
                activeItem.scrollIntoView({
                    behavior: 'smooth',
                    block: 'nearest',
                    inline: 'center'
                });
            }, 100);
        }
    });
</script>
