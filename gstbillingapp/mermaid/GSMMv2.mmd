flowchart TB

    %% =================================================
    %% MULTI-TENANT STRUCTURE
    %% =================================================
    Tenant[Tenant / Organization]
    User[User Profile]

    Tenant --> User

    %% =================================================
    %% CUSTOMER & PRODUCT (MASTER DATA)
    %% =================================================
    Customer[Customer]
    Product[Product]

    User -->|Add / Edit / Delete| Customer
    User -->|Add / Edit / Delete| Product

    %% =================================================
    %% BOOKS & INVENTORY (MANUAL ONLY)
    %% =================================================
    Books[Books]
    Inventory[Inventory]

    User -->|Manual Add / Delete| Books
    User -->|Manual Add / Delete| Inventory

    Books -. No Edit .- User
    Inventory -. No Edit .- User

    %% =================================================
    %% LOGS
    %% =================================================
    BookLogs[Book Logs]
    InventoryLogs[Inventory Logs]

    Books --> BookLogs
    Inventory --> InventoryLogs

    %% =================================================
    %% INVOICE (SALES FLOW)
    %% =================================================
    Invoice[Invoice]

    User -->|Create / Delete| Invoice
    Invoice --> Customer
    Invoice --> Product

    %% Create Invoice Automation
    Invoice -->|Create Reduce Stock| Inventory
    Invoice -->|Create Add Amount| Books

    %% Delete Invoice Undo
    Invoice -->|Delete Restore Stock| Inventory
    Invoice -->|Delete Revert Amount| Books

    %% =================================================
    %% PURCHASE (USER LEVEL ONLY - ISOLATED)
    %% =================================================
    Purchase[Purchase]
    PurchaseVendor[Purchase Vendor]
    PurchaseLog[Purchase Log]

    User -->|Add / Delete| Purchase
    User -->|Add / Delete| PurchaseVendor

    Purchase -. No Edit .- User
    PurchaseVendor -. No Edit .- User

    %% Vendor mapping
    PurchaseVendor --> Purchase

    %% Logs auto-generated
    Purchase -->|Auto Create| PurchaseLog

    %% Restriction
    User -. No Direct Access .- PurchaseLog

    %% Isolation
    Purchase -. No Impact .- Customer
    Purchase -. No Impact .- Inventory
    Purchase -. No Impact .- Books
    Purchase -. No Impact .- Invoice

    %% =================================================
    %% BANK DETAILS (STANDALONE & SHARED)
    %% =================================================
    BankDetails["Bank Details ACC No Name UPI ID"]

    %% CRUD
    User -->|Add / Edit / Delete| BankDetails

    %% Mapping rules
    User -->|Map One Only| BankDetails
    Customer -->|Map One Only| BankDetails

    %% Constraints
    User -. Only One Bank At A Time .- BankDetails
    Customer -. Only One Bank At A Time .- BankDetails

    %% Unmapped allowed
    BankDetails -. Can Exist Without Mapping .- Tenant

    %% Isolation
    BankDetails -. Standalone .- Invoice
    BankDetails -. Standalone .- Books
    BankDetails -. Standalone .- Inventory
    BankDetails -. Standalone .- Purchase
